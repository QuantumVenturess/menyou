var $photos = $('<%= j render partial: "photo", collection: @photos %>');
$('.grid').append($photos).masonry('appended', $photos);
<% if @photos.total_pages == @photos.current_page %>
    $('.endlessPagination').remove();
<% else %>
    $('.loading').replaceWith('<%= j render "endless_pagination" %>');
<% end %>